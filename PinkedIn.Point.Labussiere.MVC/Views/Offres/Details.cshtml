@model PinkedIn.Point.Labussiere.Modele.Entity.Offre

@{
    ViewBag.Title = "Details";
}

<h2>Détails de l'offre</h2>

<div>
    <hr />
    <dl class="dl-horizontal">
        <dt class="mt-2">
            @Html.DisplayNameFor(model => model.Intitule)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Intitule)
        </dd>

        <dt class="mt-2">
            @Html.DisplayNameFor(model => model.Date)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Date)
        </dd>

        <dt class="mt-2">
            @Html.DisplayNameFor(model => model.Salaire)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Salaire)
        </dd>

        <dt class="mt-2">
            @Html.DisplayNameFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt class="mt-2">
            @Html.DisplayNameFor(model => model.Responsable)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Responsable)
        </dd>
        <dt class="mt-2">
            @Html.DisplayNameFor(model => model.Postulations)
        </dt>
        <table class="table">
            <tr>
                <th>
                    Nom
                </th>
                <th>
                    Prenom
                </th>
                <th>
                    Date de postulation
                </th>
            </tr>
            @foreach (var item in Model?.Postulations)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Employe.Prenom)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Employe.Nom)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Date)
                    </td>
                </tr>
            }
        </table>
        </dl>
</div>
<p>
    @if(!Model.Postulations.Any(p => p.EmployeId == 1))
    {
        @Html.ActionLink("Postuler", "Apply", new { offreId = Model.Id, employeId = 1 }, new { @class = "btn btn-outline-dark" })
    }
    @Html.ActionLink("Modifier", "Edit", new { id = Model.Id }, new { @class = "btn btn-outline-dark" })
    @Html.ActionLink("Retourner à la liste", "Index", null, new { @class = "btn btn-outline-dark" })
</p>
